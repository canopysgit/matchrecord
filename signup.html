<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>周报名 - 足球队报名与数据统计系统</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- 顶部导航栏 -->
    <nav class="navbar">
        <div class="nav-brand">⚽ 足球队管理系统</div>
        <ul class="nav-menu">
            <li><a href="index.html">首页</a></li>
            <li><a href="signup.html" class="active">比赛报名</a></li>
            <li><a href="record.html">记录数据</a></li>
            <li><a href="results.html">比赛结果</a></li>
            <li><a href="stats.html">射手榜/助攻榜</a></li>
        </ul>
    </nav>

    <!-- 主要内容区 -->
    <main class="container">
        <!-- 比赛信息 -->
        <section class="match-info-section">
            <div class="match-info-card">
                <div class="form-group">
                    <label for="matchDate">比赛日期</label>
                    <input type="date" id="matchDate" name="matchDate" required>
                </div>
                <div class="form-group">
                    <label for="matchTimeSlot">比赛时间</label>
                    <select id="matchTimeSlot" name="matchTimeSlot">
                        <option value="">请选择时间段</option>
                        <option value="14:00-16:00">14:00-16:00</option>
                        <option value="16:00-18:00" selected>16:00-18:00</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="matchType">比赛性质</label>
                    <select id="matchType" name="matchType">
                        <option value="内战">内战</option>
                        <option value="外战">外战</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="matchVenue">比赛场地</label>
                    <input type="text" id="matchVenue" name="matchVenue" value="机场">
                </div>
            </div>
        </section>

        <!-- 球员选择 -->
        <section class="player-selection-section">
            <!-- 分队结果 -->
            <div class="teams-container">
                <div class="team white-team">
                    <h3>白队</h3>
                    <ul id="whiteTeam"></ul>
                </div>
                <div class="team blue-team">
                    <h3>蓝队</h3>
                    <ul id="blueTeam"></ul>
                </div>
            </div>

            <!-- 球员列表 -->
            <div class="player-lists">
                <!-- 主力球员名单 -->
                <div class="player-list">
                    <h3 class="section-title">主力球员</h3>
                    <ul id="mainPlayerList" class="player-grid">
                        <!-- 主力球员列表将通过JavaScript动态生成 -->
                    </ul>
                </div>

                <!-- 外援球员区域 -->
                <div class="guest-section">
                    <h3 class="section-title">外援球员</h3>
                    <ul id="guestPlayerList" class="player-grid">
                        <!-- 外援球员列表将通过JavaScript动态生成 -->
                    </ul>
                </div>
            </div>
        </section>

        <!-- 提交按钮 -->
        <div class="submit-section">
            <button type="button" class="btn-primary" id="submitTeams">保存分队</button>
        </div>
    </main>

    <!-- 页脚 -->
    <footer class="footer">
        <p>© 2024 足球队报名与数据统计系统</p>
    </footer>

    <script>
        // 主力球员数据
        const mainPlayers = [
            "霏赫", "阿曼", "嘉磊", "赵哥", "赵祺", "罗霄", "广文", "黄鹏", "马指", "邵林",
            "一陶", "尚枫", "朱门", "小鹤", "陈光", "井", "杨超", "金昊", "张健", "小常",
            "赵军", "扇子", "毛毛", "威威", "蔡湑", "袁祎", "李蒙", "宣宇", "康进", "旭东",
            "田爽", "贾楠", "麦克", "勋哥", "小杰", "马蒂", "肖凯"
        ];

        // 外援球员数据
        const guestPlayers = ["大雄", "贺楠", "小段", "青格勒"];

        // 初始化球员列表
        function initializePlayers() {
            const mainPlayerList = document.getElementById('mainPlayerList');
            const guestPlayerList = document.getElementById('guestPlayerList');

            // 清空现有内容
            mainPlayerList.innerHTML = '';
            guestPlayerList.innerHTML = '';

            // 添加主力球员
            mainPlayers.forEach(playerName => {
                const li = createPlayerListItem(playerName);
                mainPlayerList.appendChild(li);
            });

            // 添加外援球员
            guestPlayers.forEach(playerName => {
                const li = createPlayerListItem(playerName);
                guestPlayerList.appendChild(li);
            });

            // 绑定保存按钮事件
            document.getElementById('submitTeams').addEventListener('click', saveTeams);
        }

        // 创建球员列表项
        function createPlayerListItem(playerName) {
            const li = document.createElement('li');
            li.innerHTML = `
                <span class="player-name">${playerName}</span>
                <div class="button-group">
                    <button class="team-btn white" data-team="whiteTeam">白</button>
                    <button class="team-btn blue" data-team="blueTeam">蓝</button>
                </div>
            `;
            
            // 绑定按钮事件
            const buttons = li.querySelectorAll('.team-btn');
            buttons.forEach(button => {
                button.addEventListener('click', function() {
                    handleTeamButtonClick(this, playerName);
                });
            });
            
            return li;
        }

        // 处理队伍按钮点击
        function handleTeamButtonClick(button, playerName) {
            const playerLi = button.closest('li');
            const team = button.getAttribute('data-team');
            const otherTeam = team === 'whiteTeam' ? 'blueTeam' : 'whiteTeam';
            
            // 更新按钮状态
            const whiteBtn = playerLi.querySelector('.team-btn.white');
            const blueBtn = playerLi.querySelector('.team-btn.blue');
            
            // 如果点击的是已选中的按钮，则取消选择
            if (button.classList.contains('selected')) {
                button.classList.remove('selected');
                removePlayerFromTeam(playerName, team);
                return;
            }
            
            // 移除之前的选中状态
            whiteBtn.classList.remove('selected');
            blueBtn.classList.remove('selected');
            button.classList.add('selected');
            
            // 从另一个队伍中移除
            removePlayerFromTeam(playerName, otherTeam);

            // 添加到选中的队伍
            addPlayerToTeam(playerName, team, playerLi);
        }

        // 从队伍中移除球员
        function removePlayerFromTeam(playerName, teamId) {
            const teamList = document.getElementById(teamId);
            if (!teamList) return;
            
            const playerToRemove = Array.from(teamList.children).find(li => 
                li.textContent.trim().startsWith(playerName)
            );
            
            if (playerToRemove) {
                playerToRemove.remove();
            }
        }

        // 添加球员到队伍
        function addPlayerToTeam(playerName, teamId, originalLi) {
            const teamList = document.getElementById(teamId);
            if (!teamList) return;
            
            // 检查是否已经在队伍中
            const existingPlayer = Array.from(teamList.children).find(li => 
                li.textContent.trim().startsWith(playerName)
            );
            
            if (!existingPlayer) {
                const teamLi = document.createElement('li');
                teamLi.innerHTML = `
                    ${playerName}
                    <button class="delete-btn" title="移除">×</button>
                `;
                teamList.appendChild(teamLi);
                
                // 绑定删除按钮事件
                const deleteBtn = teamLi.querySelector('.delete-btn');
                deleteBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    
                    // 找到原始球员列表中的对应球员
                    const playerLists = document.querySelectorAll('.player-grid');
                    playerLists.forEach(list => {
                        const originalPlayerLi = Array.from(list.children).find(li => 
                            li.querySelector('.player-name').textContent === playerName
                        );
                        if (originalPlayerLi) {
                            originalPlayerLi.querySelectorAll('.team-btn').forEach(btn => {
                                btn.classList.remove('selected');
                            });
                        }
                    });
                    
                    // 移除队伍中的球员
                    teamLi.remove();
                });
            }
        }

        // 保存分队结果
        function saveTeams() {
            const whiteTeam = Array.from(document.getElementById('whiteTeam').children).map(li => 
                li.textContent.trim().replace('×', '').trim()
            );
            const blueTeam = Array.from(document.getElementById('blueTeam').children).map(li => 
                li.textContent.trim().replace('×', '').trim()
            );

            // 保存到 localStorage
            const matchData = {
                date: document.getElementById('matchDate').value,
                time: document.getElementById('matchTimeSlot').value,
                type: document.getElementById('matchType').value,
                venue: document.getElementById('matchVenue').value,
                whiteTeam: whiteTeam,
                blueTeam: blueTeam
            };

            localStorage.setItem('currentMatch', JSON.stringify(matchData));
            alert('分队结果已保存！');
        }

        // 初始化页面
        document.addEventListener('DOMContentLoaded', initializePlayers);
    </script>
</body>
</html> 